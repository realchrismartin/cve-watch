import Action from "../type/Action";

const initialState = {vulnerabilities:[] as any[],shownVulnerabilities:[] as any[]} 

const VulnerabilityReducer = (state = initialState, action: Action) => {

    let result = initialState;

    switch(action.type) {

        case "SET_VULNERABILITY_FILTER" : {
            if(action.filter.length === 0) {
               result = {
                   ...state,
                   shownVulnerabilities:state.vulnerabilities
               }
            } else {
                result = {
                    ...state,
                    shownVulnerabilities:state.vulnerabilities.reduce(it => { return true }) //TODO: Make this actually reduce
                }
            }
            break
        }

        case "GET_VULNERABILITIES" : {
            result = {
                ...state,
                vulnerabilities:[
                    ...state.vulnerabilities,
                    ...action.results
                ]
            }
            break
        }
        default: {
            console.log("Action type " + action.type + " has no switch case in VulnerabilityReducer");
            result = initialState;
            break
        }
    }

    return result;
}

export default VulnerabilityReducer;