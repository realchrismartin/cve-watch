import React from "react";
import { RootState } from "../store";
import { ConnectedProps, connect } from "react-redux";

import "../css/AccountSettingsViewComponent.css";
import SoftwareSearchListItemComponent from "./SoftwareSearchListItemComponent";

type ConstructorType = {};
type PropsType = ConnectedProps<typeof connector>;

class AccountSettingsViewComponent extends React.Component<
  PropsType,
  ConstructorType
> {

  render(): any {
    let items = [];

    if (this.props.subscriptions !== undefined) {
      items = this.props.subscriptions.map((it: any, index: number) => {
        return (
          <SoftwareSearchListItemComponent
            simple={true}
            key={"sub-list-item-" + index}
            data={it}
          />
        );
      });
    }
    return <div><div className="account-settings-subscriptions-container">{items}</div></div>;
  }
}

function mapStateToProps(state: RootState) {
  return {
    session: state.accountReducer.hasSession,
    account: state.accountReducer.account,
    username: state.accountReducer.username,
    subscriptions: state.accountReducer.subscriptions,
    pageSize: state.settingsReducer.pageSize,
    tooltipTime: state.settingsReducer.tooltipTime,
  };
}

const connector = connect(mapStateToProps);
export default connector(AccountSettingsViewComponent);
