import axios from 'axios';
import React from 'react';
interface ConstructorType {}
interface PropsType {}

class AccountCreationViewComponent extends React.Component<PropsType,ConstructorType> {

  private usernameInputRef : any;
  private passwordInputRef : any;

 constructor(props : PropsType) {
   super(props);
    this.usernameInputRef = React.createRef();
    this.passwordInputRef = React.createRef();
 }

 handleLogin(event : any) {
  let body = {username:this.usernameInputRef.value,password:this.passwordInputRef.value}
  axios.post("http://localhost/accounts/login",body,{withCredentials:true}).then((res) => {
    console.log(res)
  }).catch((err) => console.log(err));
 }

 handleCreateAccount(event : any) {
  let body = {username:this.usernameInputRef.value,password:this.passwordInputRef.value}
  axios.post("http://localhost/accounts/",body).then((res) => {
    console.log(res)
  }).catch((err) => console.log(err));
 }

 render() : any {

   return (
   <div> 
     <form onSubmit={(e) => {e.preventDefault()}}>
       <label htmlFor="usernameInput">Username</label>
       <input name="usernameInput" type="normal" ref={(r) => {this.usernameInputRef = r}}></input>
       <label htmlFor="passwordInput">Password</label>
       <input name="passwordInput" type="password" ref={(r) => {this.passwordInputRef = r}}></input>
       <button type="submit" onClick={(e) => {this.handleCreateAccount(e)}}>Create Account</button>
       <button type="submit" onClick={(e) => {this.handleLogin(e)}}>Log in</button>
     </form>
   </div>
   )
 } 
}

export default AccountCreationViewComponent;
