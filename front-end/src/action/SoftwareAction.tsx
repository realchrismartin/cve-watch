//Note: Call Services in actions if required

import { getSoftwareFromRepo, getSoftwareFromCPE } from "../service/SoftwareService";
import { AppThunk } from "../type/Action";

/* Action which retrieves a page of software data from the server */
export const getCPESoftwareAction = (query : string, startAt : number, pageSize : number): AppThunk => async dispatch => {
    return getSoftwareFromCPE(query,startAt,pageSize).then((data) => {
        return dispatch({type:"GET_SOFTWARE",results:data.results});
    })
}
/* Action which retrieves a page of software data from the server */
export const getRepoSoftwareAction = (user : string, repo: string, startAt : number, pageSize : number): AppThunk => async dispatch => {
    return getSoftwareFromRepo(user,repo,startAt,pageSize).then((data) => {
        return dispatch({type:"GET_SOFTWARE",results:data.results});
    })
}
/* Action which clears all software data in the store */
export const clearSoftwareAction = (): AppThunk => async dispatch => {
    return dispatch({type:"CLEAR_SOFTWARE"});
}

/* Action which sets the most recently executed software query string */
export const setSoftwareQueryAction = (query : string): AppThunk => async dispatch => {
    return dispatch({type:"SET_SOFTWARE_QUERY",query:query});
}