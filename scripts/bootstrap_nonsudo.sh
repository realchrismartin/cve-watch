#!/bin/bash

sudo env PATH=$PATH:/usr/bin /usr/lib/node_modules/pm2/bin/pm2 startup systemd -u vagrant --hp /home/vagrant
pm2 startup systemd
cd /vagrant/front-end/
npm install
cd /vagrant/back-end/
mkdir /vagrant/back-end/dist/ #Deleted by su
npm install

sudo chown -R vagrant:vagrant /home/vagrant/.pm2/
pm2 start /vagrant/scripts/processes.json --env vagrant
pm2 save
echo ""
# echo "BPB Front-End should be available at: 192.168.33.10:3000"
# echo "BPB Back-End should be available at: 192.168.33.10:8080"
# echo ""
# echo "Reload the app and refresh files using:"
# echo "     scripts/reload.sh" 
# echo "Run all tests using:"
# echo "     scripts/test_all.sh"
# echo "Run front-end tests using:"
# echo "     scripts/test_front.sh"
# echo "Run back-end tests using:"
echo "     YOU DID IT. CONGRATS."
exit 0
