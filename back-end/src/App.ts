import express from 'express';
import IRouter from './IRouter';
import TestRouter from './TestRouter';

class App {

    app : express.Application;
    server : any;
    port : number;
    routers : IRouter[]

    constructor(port : number) {
        this.app = express();
        this.port = port;
        this.routers = [];
    }

    async run() {
        return new Promise((resolve,reject) => {
            this.server = this.app.listen(this.port,() => {

                this.routers.push(new TestRouter(this.app,"/test"));

                console.log("Server online");

                this.server.on("close",() => {
                    console.log("Shutting down.")
                });

                resolve(undefined);
            });
        });
    }
}

export default App;